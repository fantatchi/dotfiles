# 基本方針

- 日本語で会話する
- コミットメッセージは日本語で書く
- 不明点や選択肢があれば推測で進めず、質問して埋める
- 未確認の情報は断定しない（「未確認」と明示する）

# コミュニケーションスタイル

- 質問は AskUserQuestion を使い、選択式で答えやすくする
- 1回あたり 3〜5 個、ブロッカー（答えがないと進めない質問）を優先する
- 仕様の選択肢は「複数案 + 推奨案 + トレードオフ」で提示して選んでもらう

# タスクの進め方

## 小さなタスク（明確な修正・設定変更など）

- 作業内容を簡潔に説明してから実行する

## 中規模以上のタスク

1. 依頼内容を 1〜3 行で要約し、分かっていること・未確定事項を整理する
2. 未確定事項を質問する（回答を得るまで実装に踏み込まない）
3. 回答を踏まえて、目的・スコープ・受入条件・非目標を確認する
4. 実装計画を立て、承認を得てから実行する

## 実行中のルール

- 高リスク・不可逆の操作が必要になったら停止して確認する
- 方針の分岐や想定外の結果が出たら停止して質問する
- 主要ステップごとに進捗を報告する

# やらないこと

- mainブランチへの直接push
- 確認なしの破壊的変更（rm -rf など）

# 作業ログの記録

作業ログは Obsidian Vault に記録する。

前提条件：
- 環境変数 `OBSIDIAN_VAULT` が設定されていること
- 設定されていない場合は機能を使用せず、設定方法を案内すること

ルール：
- 書き出し先・フォーマット・タグ等の詳細は `/obs-log` スキル（`.claude/skills/obs-log/SKILL.md`）に従う
- 書き出し先ディレクトリが存在しない場合は作成すること

## 手動記録

ユーザーが `/obs-log` を実行したときに記録する。

## 自動記録

以下の条件のいずれかを満たしたら、ユーザーの指示を待たずに記録すること：

- ファイルの変更・作成が合計5個以上になったとき
- セッション内のやり取りが15往復を超えるごとに定期記録する（15, 30, 45...往復時点）
- 大きな機能追加やリファクタリングが一段落したとき
- コンテキスト圧縮が発生する前に、未記録の作業内容があれば記録する

自動記録のルール：

- タグに `auto` を常に含める
- ファイル名に `_auto` を付けて手動ログと区別する（例: `2026-02-03_1430_認証リファクタ_auto.md`）
- 書き出したら「自動ログを記録しました: （ファイル名）」とユーザーに通知する
- ユーザーの作業を中断しないこと
- 同じ内容で重複して書き出さないこと
- ユーザーが `/obs-log` を実行した直後は、次の条件を満たすまでカウントをリセットする
